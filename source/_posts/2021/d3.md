---
mathjax: true
title: 3th Contest 奇迹和魔法都是存在的
date: 2021-02-04 21:00:00
categories:
- 2021 冬季
---

恭喜陈一涵，王子悦，王浩宇分别冠亚季军，张行获得集训队外第一。

## A Watermelon

CF4A Watermelon，选这个题是因为他叫 QAQ。

### 题目描述

判断输入的正整数能否分成两个正偶数，能则输出 `YES`，不能则输出 `NO`。

### 题解

显然大于 $2$ 的偶数满足题意。

## B 最长上升子序列

### 题目描述

对于长度为 $n$ 的 $1 \dots n$ 的排列，有 $n!$ 种不同排法。求有多少种排法使得最长上升子序列的长度恰好为 $n-1$。

### 题解

观察可得答案是 $(n-1)^2$。

最长上升子序列长度为 $n$ 的情况只有一种。

要使长度从 $n$ 变为 $n-1$，当且仅当某一个数插到后面某数之后或前面某个数之前，这是 $n(n-1)$。

别忘了会有重复，相邻交换的会被重复计算两遍有 $n-1$ 种，所以是 $(n-1)^2$。

## C 封锁道路

### 题目描述

南京理工大学的校园是一张由 $n$ 个点构成的无向图，$n$ 个点之间由 $m$ 条道路连接。每个人可以对一个点进行封锁，当某个点被封锁后，与这个点相连的道路就被封锁了，非常悲剧的一点是，人是一种不和谐的生物，当两个人封锁了相邻的两个点时，他们会发生冲突。

询问：最少需要多少个人，可以封锁所有道路并且不发生冲突。

### 题解

显然当且仅当校园是二分图时有解，结果为二分图染色中数量较少那一方，注意图不一定联通。

## D 最长公共子序列

### 题目描述

数组 $a,b$ 只可能含有 $[1, n]$ 的数字，每个数字只可能出现 $[0, 4]$次，小明想要求这两个数组的最长公共子序 列，不过小明的数学有点差，如果 $|a_i - b_j| \le 1$ 他就认为两个数相等(不传递)，请你求出小明心中的最长公共子序列。

### 题解

注意到以 $b_j$ 为末尾的最长公共子序列只能从最多12个地方转移而来，$b_j - 1, b_j,  b_{j+1}$

正序遍历 $b$ 倒着维护 $a$ 的树状数组：

$$
dp(j) = \max(query(i-1)+1), |a_i -b_j| \le 1
$$

## E CF505D Mr. Kitayuta's Technology

### 描述

Shuseki Kingdom 在创新和技术方面是世界领先的国家。在 Shuseki Kingdom 中有编号 $1$ 到 $n$ 的 $n$ 个城市。

Kitayuta 先生的研究使 Shuseki Kingdom 会在两个城市之间建造传送管道。连接两个城市的传送管道是单向的，即从城市x到城市y的传送管道不能用来从城市 $y$ 前往城市 $x$。由于每个城市内的交通极为发达，因此如果从城市 $x$ 到城市 $y$ 的传送管道和从城市y到城市z的传送管道都已建造好，人们就可以直接从城市 $x$ 前往城市 $z$。 Kitayuta先生同时也是一个政客。他认为有 $m$ 对 “重要城市对” $(a_i,b_i)$ $(1 \le i \le m)$ 之间的交通很重要。他计划建造传送管道时，要使得对于每对“重要城市对” $(a_i,b_i)$，都可以通过使用一个或多个传送管道，从城市 $a_i$ 前往城市 $b_i$。请你计算出，最少需要建造几条传送管道，才能满足 Kitayuta 先生的需求。到目前为止，还没有建造任何传送管道，城市之间也没有任何其他有效的交通工具。

### 题解

观察之后发现：如果把每一个连通分量连成一个环，需要的长度等于连通分量的大小，此时一定满足题意，并且如果这个连通分量是 DAG 那么只需要按照拓扑序成一条链，一条链肯定是长度最小的。

所以答案是如果连通分量是 DAG 就大小减一，不然就是大小，然后求和。
