---
mathjax: true
title: 2nd 一点点数据结构？
date: 2020-01-21 20:56:59
categories:
- 2020 冬季
tags:
- 数据结构
- DP
---

## A Got Any Grapes?

简单的签到题。

首先考虑满足Andrew，然后再考虑满足Dmitry，因为最后一个人是没什么条件的，很简单的一道题。

## B Yet Another Array Partitioning Task

考虑你要得到 $k$ 个分组，且每个分组都要取 $m$ 个最大的数字，显然是将整个数组的最大 $mk$ 个数全取是最大的。这时候就考虑怎么划分可以把这 $mk$个全取到。

很简单，你只要把这 $mk$ 个数字拿出来知道他们在数组中的位置，然后按顺序每 $m$ 个划成一个分组就好了。

## C Wi-Fi

一个比较切合今天主题的题，因为就用到了一点点的数据结构。

首先考虑是一个DP，

定义 $F[i]$ 为联网联了前 $i$ 的点最小花费了多少，

显然对于0的点有：$F[i]=min(F[i-1]+i,F[i])$

而对于 $1$ 的点，则要扫描 $(L,R)$ 范围内的最小的点，然后来更新整个 $(L,R)$

显然几个 `for` 是不能在时限内完成的，所以用到了区间更新的工具 —— 线段树来操作。

代码：https://xlorpaste.cn/1vu9mc

## D Philosophical … Balance

应该是最难的题？

这是一个经典的纳什均衡的题目。

考虑当前只有两个字符串 $s_1,s_2$，你选择 $s_1$ 的概率是 $x$，$lcp(s_1,s_2)=L$，$Len(s_1)=L_1$，$Len(s_2)=L_2$

这时候你有 $x$ 的概率选择 $s_1$，$1-x$ 的概率选择 $s_2$，让你选一个 $x$ 使得你的收益最大。

对方选择s1的时候，你的收益是 $L_1 \times x+L \times (1-x)$

对方选择s2的时候，你的收益是 $L_2 \times (1-x)+L \times x$

你的收益是随对方的抉择波动的，显然取得一个平衡值，你的收益不会变，那么你的收益是最大的。

就是取 $L_1 \timesx+L \times (1-x)=L2 \times (1-x)+L \times x$ 的 $x$ 的概率，这时候的x才是最优解。

对于这题，得先用后缀数组和 RMQ 做预处理，然后再用分治，将每一个长串划分为 $(L,mid-1)(mid+1,R)$，这个 mid 是这个长串中 height 最小的点。

这时候，就相当于你手里有 $2$ 个串的模型，只是 LCP 是这个 $height[mid]$。

算出 $x$，然后再算出期望就好了。

代码：https://xlorpaste.cn/96pl82

## E Marbles

树状数组题(●'◡'●)

首先我们可以观察到这里的颜色数只有 $20$ 个，

可以状压 dp，定义 $F[station]$ 为当 station 里为 $1$ 的颜色被排序后的最小答案。

此时进来一个 $j$，这时候，只要考虑他排在 station 里所有的数字后面的代价是多少就可以。

这时候，我们只要考虑如何处理出这个代价。

数字交换的代价通常是用逆序对来处理。

将每两个颜色用逆序对算一次交换代价，然后状压，就可以了。

代码：https://xlorpaste.cn/25wnrf
